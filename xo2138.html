<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
  border: 4px solid black;
  border-collapse: collapse;
}

th, tr {
  font-size: 50px;
  height: 80px;
  width: 80px;
}
</style>
</head>
<body>
<table id="field">
  <tr>
    <th id="t00"> </th> 
    <th id="t01"> </th>
    <th id="t02"> </th>
  </tr>
  <tr>
    <th id="t10"> </th> 
    <th id="t11"> </th>
    <th id="t12"> </th>
  <tr>
    <th id="t20"> </th> 
    <th id="t21"> </th>
    <th id="t22"> </th>
  </tr>
 </table>

<h1 id="step">Ход X </h1>

<script type="text/javascript">
  var symbolX = "✕";
  var symbolO = "○";
  
  let field = [	[,,],
				[,,],
				[,,]
			];
  
  var nextSymbolIsX = true;
  
  function checkGame() {
	//проверка победителя по горизонтали	
	for (let i = 0; i < 3; i++) {
			if (((field[i][0]===symbolX)&&
				(field[i][1]===symbolX)&&
				(field[i][2]===symbolX))) return 1;
			
			if (((field[i][0]===symbolO)&&
				(field[i][1]===symbolO)&&
				(field[i][2]===symbolO))) return 2;
	}
	//проверка победителя по вертикали		
	for (let j = 0; j < 3; j++) {
		if (((field[0][j]===symbolX)&&
			(field[1][j]===symbolX)&&
			(field[2][j]===symbolX))) return 1;
		 
		if (((field[0][j]===symbolO)&&
			(field[1][j]===symbolO)&&
			(field[2][j]===symbolO))) return 2;
		 
	}
	//проверка победителя по диагоналям	
	if (((field[0][0]===symbolX)&&
		 (field[1][1]===symbolX)&&
		 (field[2][2]===symbolX))||
		((field[0][2]===symbolX)&&
		 (field[1][1]===symbolX)&&
		 (field[2][0]===symbolX))) return 1;
		
	if (((field[0][0]===symbolO)&&
		 (field[1][1]===symbolO)&&
		 (field[2][2]===symbolO))||
		((field[0][2]===symbolO)&&
		 (field[1][1]===symbolO)&&
		 (field[2][0]===symbolO))) return 2;
	
	
	for (let i = 0; i < 3; i++) {
		for (let j = 0; j < 3; j++) {
			if (field[i][j] == undefined) return 0;
		}
	}
	
	return 3;
  }

  function clearField() {
	for (let i = 0; i < 3; i++) {
		for (let j = 0; j < 3; j++) {
			field[i][j]=undefined;
			var id = "t" + i + j;
//			alert(id);
			var cell = document.getElementById(id);
			cell.firstChild.nodeValue = "";
			console.log(cell);
			
		}
	}
  }

  function showSymbol() {
	// получает элемент на который кликнули
    var clickedElement = event.target;
  
    // получает id элемента на который кликнули
    // затем берет второй символ от id, "t2" => "2"
    // затем parseInt чтобы получить из сроки "2" интеджер 2
    var indexOfElementHor = parseInt(clickedElement.id.substring(1,2), 10);
	var indexOfElementVer = parseInt(clickedElement.id.substring(2,3), 10);
	//проверка ячейки, свободна ли она	
	if (field[indexOfElementHor][indexOfElementVer]===undefined) {
		if (nextSymbolIsX) {
			field[indexOfElementHor][indexOfElementVer] = symbolX;
			clickedElement.firstChild.nodeValue = symbolX;
			nextSymbolIsX = !nextSymbolIsX;
		}	 else {
			field[indexOfElementHor][indexOfElementVer] = symbolO;
			clickedElement.firstChild.nodeValue = symbolO;
			nextSymbolIsX = !nextSymbolIsX;
		}
	}
	// выводит в консоль элемент и индекс
	console.log(clickedElement, indexOfElementHor,indexOfElementVer);
	// вывести в консоль состояние поля
    console.log(field);	
	
	
  }

  function stepText() {
	if (nextSymbolIsX) step.firstChild.nodeValue = "Ход X";
		else step.firstChild.nodeValue = "Ход O";
  }

  function proccesClick() { 
		showSymbol();
		checkGame();
		stepText();
	
		switch(checkGame()) {
		case 1: 
			step.firstChild.nodeValue = "Победа за Х";
			if (confirm("Победа за Х, еще?")) clearField();
			break;
		case 2: 
			step.firstChild.nodeValue = "Победа за O";
		//	if (confirm("Победа за О, еще?")) clearField(); 
			break;
		case 3: 
			step.firstChild.nodeValue = "Ничья";
		//	if (confirm("Ничья, еще?")) clearField(); 
			break;
		}
	
	}
	
    	
}

  

var el = document.getElementById("field");
	el.addEventListener("click", proccesClick, false);  
  
 
  
  
</script>
</body>
</html>